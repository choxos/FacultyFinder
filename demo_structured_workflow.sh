#!/bin/bash
# Demo: Complete Structured PubMed Workflow
# Shows how to use the university folder structure system

echo "ğŸ¯ PubMed Structured Workflow Demo"
echo "=================================="
echo "This demo shows how to search, parse, and organize PubMed data"
echo "using your university folder structure."
echo ""

# Step 1: Generate scripts
echo "ğŸ“œ Step 1: Generate Structured Scripts"
echo "--------------------------------------"
echo "python3 generate_edirect_scripts_structured.py"
echo ""
echo "This creates scripts that save .txt files to:"
echo "data/publications/pubmed/CA/ON/CA-ON-002_mcmaster.ca/"
echo ""

# Step 2: Run a test search
echo "ğŸ“‹ Step 2: Available Search Options"
echo "-----------------------------------"
echo "Individual searches:"
echo "  ./edirect_scripts_structured/search_Gordon_Guyatt.sh"
echo "  ./edirect_scripts_structured/search_Salim_Yusuf.sh"
echo ""
echo "Batch search all faculty:"
echo "  ./edirect_scripts_structured/search_all_faculty_structured.sh"
echo ""
echo "Custom search:"
echo "  ./edirect_scripts_structured/custom_search_structured.sh \"Faculty Name\" \"CA-ON-002_mcmaster.ca\""
echo ""

# Step 3: Parse results
echo "ğŸ” Step 3: Parse Results"
echo "------------------------"
echo "After searches complete, parse all university data:"
echo "python3 parse_medline_structured.py data/publications/pubmed/"
echo ""
echo "This creates:"
echo "  â€¢ Individual faculty JSON files"
echo "  â€¢ Combined publications JSON/CSV"
echo "  â€¢ University summary with statistics"
echo "  â€¢ Parse summary with details"
echo ""

# Step 4: Transfer and import
echo "ğŸ“¤ Step 4: Transfer to VPS and Import"
echo "-------------------------------------"
echo "Transfer parsed data to VPS:"
echo "scp -r parsed_publications_structured/ xeradb@your-vps:/var/www/ff/"
echo ""
echo "Import to PostgreSQL database (on VPS):"
echo "python3 import_pubmed_data.py parsed_publications_structured/"
echo ""

# Step 5: Expected results
echo "ğŸ“Š Step 5: Expected Results"
echo "---------------------------"
echo "Folder structure after completion:"
echo "data/publications/pubmed/"
echo "â”œâ”€â”€ CA/"
echo "â”‚   â””â”€â”€ ON/"
echo "â”‚       â””â”€â”€ CA-ON-002_mcmaster.ca/"
echo "â”‚           â”œâ”€â”€ Gordon_Guyatt_publications.txt"
echo "â”‚           â”œâ”€â”€ Salim_Yusuf_publications.txt"
echo "â”‚           â”œâ”€â”€ Hertzel_Gerstein_publications.txt"
echo "â”‚           â”œâ”€â”€ Mohit_Bhandari_publications.txt"
echo "â”‚           â”œâ”€â”€ Mark_Crowther_publications.txt"
echo "â”‚           â”œâ”€â”€ Deborah_Cook_publications.txt"
echo "â”‚           â”œâ”€â”€ Andrew_Mente_publications.txt"
echo "â”‚           â”œâ”€â”€ Bram_Rochwerg_publications.txt"
echo "â”‚           â”œâ”€â”€ Holger_Schunemann_publications.txt"
echo "â”‚           â””â”€â”€ Jan_Brozek_publications.txt"
echo ""

echo "Database results:"
echo "  â€¢ Publications linked to professors"
echo "  â€¢ University information preserved" 
echo "  â€¢ Faculty profiles with publication counts"
echo "  â€¢ Homepage displays publication metrics"
echo ""

# Benefits
echo "ğŸ¯ Benefits of Structured Approach"
echo "----------------------------------"
echo "âœ… Organized by university (scalable)"
echo "âœ… Easy to find specific faculty files"
echo "âœ… University context preserved" 
echo "âœ… Compatible with existing structure"
echo "âœ… Ready for multi-university expansion"
echo "âœ… Clear separation of data sources"
echo ""

# Quick start
echo "ğŸš€ Quick Start"
echo "--------------"
echo "To begin right now:"
echo ""
echo "1. Test single faculty:"
echo "   ./edirect_scripts_structured/search_Gordon_Guyatt.sh"
echo ""
echo "2. Or run all faculty:"
echo "   ./edirect_scripts_structured/search_all_faculty_structured.sh"
echo ""
echo "3. Parse when complete:"
echo "   python3 parse_medline_structured.py data/publications/pubmed/"
echo ""
echo "4. Import to VPS:"
echo "   python3 import_pubmed_data.py parsed_publications_structured/"
echo ""

echo "ğŸ‰ Your FacultyFinder will have properly organized publication data!" 