<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universities - FacultyFinder</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Browse universities worldwide with faculty data. Search and filter by country, location, and more.">
    <meta name="keywords" content="universities, higher education, faculty, academic institutions, global universities">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@6.0.0/css/all.min.css">
    
    <!-- Custom CSS Theme -->
    <link rel="stylesheet" href="/static/css/themes/facultyfinder-theme.css">
    <link rel="stylesheet" href="/static/css/facultyfinder.css">
    <link rel="stylesheet" href="/static/css/filter-fixes.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="/">
                <i class="fas fa-graduation-cap me-2"></i>
                FacultyFinder
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/countries">Countries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/universities">Universities</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/faculties">Faculties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/ai-assistant">
                            <i class="fas fa-robot me-1"></i>AI Assistant
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="btn btn-outline-primary me-2" href="/login">
                            <i class="fas fa-sign-in-alt me-1"></i>Sign In
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary" href="/register">
                            <i class="fas fa-user-plus me-1"></i>Sign Up
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="mb-3">
                    <i class="fas fa-university text-primary me-3"></i>
                    Universities Worldwide
                </h1>
                <p class="lead text-muted">
                    Explore universities from around the world. Discover institutions with leading faculty in your field of research.
                </p>
            </div>
        </div>
        
        <!-- Search and Filters -->
        <div class="search-filters">
            <form id="university-search-form">
                <div class="row">
                    <div class="col-lg-4 mb-3">
                        <label class="filter-label">Search Universities</label>
                        <input type="text" class="form-control" name="search" id="searchInput"
                               placeholder="University name, city, or keywords...">
                    </div>
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="filter-label">Country</label>
                        <select class="form-select" name="country" id="countrySelect">
                            <option value="">All Countries</option>
                        </select>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="filter-label">State/Province/Region</label>
                        <select class="form-select" name="province" id="provinceSelect">
                            <option value="">All Regions</option>
                        </select>
                    </div>
                    <div class="col-lg-2 col-md-6 mb-3">
                        <label class="filter-label">University Type</label>
                        <select class="form-select" name="university_type" id="universityTypeSelect">
                            <option value="">All Types</option>
                            <option value="Public">Public</option>
                            <option value="Private">Private</option>
                            <option value="Research">Research University</option>
                            <option value="Liberal Arts">Liberal Arts</option>
                            <option value="Technical">Technical Institute</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-3 mb-3">
                        <label class="filter-label">Language of Instruction</label>
                        <select class="form-select" name="language" id="languageSelect">
                            <option value="">All Languages</option>
                            <option value="English">English</option>
                            <option value="French">French</option>
                            <option value="Spanish">Spanish</option>
                            <option value="German">German</option>
                            <option value="Mandarin">Mandarin</option>
                            <option value="Arabic">Arabic</option>
                            <option value="Portuguese">Portuguese</option>
                            <option value="Russian">Russian</option>
                        </select>
                    </div>
                    <div class="col-lg-3 mb-3">
                        <label class="filter-label">Sort By</label>
                        <select class="form-select" name="sort_by" id="sortSelect">
                            <option value="faculty_count">Faculty Count</option>
                            <option value="name">Name</option>
                            <option value="location">Location</option>
                            <option value="established">Year Established</option>
                        </select>
                    </div>
                    <div class="col-lg-3 mb-3 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary me-2">
                            <i class="fas fa-search me-2"></i>Search
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="resetFilters()">
                            <i class="fas fa-refresh me-2"></i>Reset
                        </button>
                    </div>
                    <div class="col-lg-3 mb-3 d-flex align-items-end">
                        <div class="d-flex align-items-center">
                            <label class="small text-muted me-2">Per page:</label>
                            <select class="form-select form-select-sm" style="width: auto;" id="perPageSelect" onchange="searchUniversities()">
                                <option value="12">12</option>
                                <option value="24" selected>24</option>
                                <option value="36">36</option>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Results Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h4 class="mb-2">University Directory</h4>
                        <div id="results-info" class="text-muted">
                            Loading universities...
                        </div>
                    </div>
                    <div class="view-toggles">
                        <div class="btn-group" role="group">
                            <button type="button" class="btn btn-outline-primary active" data-view="grid" onclick="toggleView('grid')" title="Grid View">
                                <i class="fas fa-th"></i>
                            </button>
                            <button type="button" class="btn btn-outline-primary" data-view="list" onclick="toggleView('list')" title="List View">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Universities Grid -->
        <div id="universities-grid" class="row">
            <!-- Loading indicator -->
            <div class="col-12 text-center p-5">
                <div class="loading-spinner"></div>
                <p class="mt-3 text-muted">Loading universities...</p>
            </div>
        </div>
        
        <!-- Universities Table (Hidden by default) -->
        <div id="universities-table" class="table-responsive" style="display: none;">
            <table class="table table-hover table-striped">
                <thead class="table-dark">
                    <tr>
                        <th scope="col" class="sortable" data-sort="name">
                            University Name
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable" data-sort="country">
                            Country
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable" data-sort="city">
                            City
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable" data-sort="type">
                            Type
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable text-center" data-sort="faculty_count">
                            Faculty
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable text-center" data-sort="department_count">
                            Departments
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col" class="sortable text-center" data-sort="year">
                            Established
                            <i class="fas fa-sort ms-1"></i>
                        </th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- University table rows will be populated here -->
                </tbody>
            </table>
        </div>
        
        <!-- Pagination -->
        <div id="pagination-container"></div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>
                        <i class="fas fa-graduation-cap me-2"></i>
                        FacultyFinder
                    </h5>
                    <p class="mb-3">
                        Connecting researchers with their ideal academic collaborators worldwide through AI-powered matching and comprehensive faculty profiles.
                    </p>
                    <p class="mb-0">
                        &copy; 2025 FacultyFinder. All rights reserved.
                    </p>
                </div>
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-3">Quick Links</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/faculties" class="text-light text-decoration-none">Faculty Search</a></li>
                        <li class="mb-2"><a href="/universities" class="text-light text-decoration-none">Universities</a></li>
                        <li class="mb-2"><a href="/countries" class="text-light text-decoration-none">Countries</a></li>
                        <li class="mb-2"><a href="/ai-assistant" class="text-light text-decoration-none">AI Assistant</a></li>
                        <li class="mb-2"><a href="/api/docs" class="text-light text-decoration-none">API Documentation</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6 class="fw-bold mb-3">Connect With Us</h6>
                    <div class="d-flex gap-3 mb-3">
                        <a href="#" class="text-muted"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-github fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-researchgate fa-lg"></i></a>
                    </div>
                    <p class="small text-muted">
                        Follow us for updates on new features and academic collaboration opportunities.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="/static/js/facultyfinder.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Global variables
        let currentView = 'grid';
        let currentPage = 1;
        let currentFilters = {
            search: '',
            country: '',
            province: '',
            university_type: '',
            language: '',
            sort_by: 'faculty_count'
        };
        let allUniversities = [];
        let countries = [];
        let provincesByCountry = {};
        
        // API Base URL
        const API_BASE = '/api/v1';
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadCountries();
            loadUniversities();
            
            // Add event listeners
            document.getElementById('university-search-form').addEventListener('submit', function(e) {
                e.preventDefault();
                searchUniversities();
            });
            
            // Add change listeners for dynamic filtering
            document.getElementById('countrySelect').addEventListener('change', updateProvinces);
        });
        
        // Load countries for filter
        async function loadCountries() {
            try {
                const response = await fetch(`${API_BASE}/countries`);
                const data = await response.json();
                
                const countrySelect = document.getElementById('countrySelect');
                data.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.country;
                    option.textContent = country.country;
                    countrySelect.appendChild(option);
                });
                
            } catch (error) {
                console.error('Error loading countries:', error);
            }
        }
        
        // Update provinces based on selected country
        function updateProvinces() {
            const countrySelect = document.getElementById('countrySelect');
            const provinceSelect = document.getElementById('provinceSelect');
            const selectedCountry = countrySelect.value;
            
            // Clear current options
            provinceSelect.innerHTML = '<option value="">All Regions</option>';
            
            // For now, add some common provinces/states for major countries
            const provincesByCountry = {
                'Canada': ['Ontario', 'Quebec', 'British Columbia', 'Alberta', 'Saskatchewan', 'Manitoba', 'Nova Scotia', 'New Brunswick', 'Newfoundland and Labrador', 'Prince Edward Island'],
                'United States': ['California', 'New York', 'Texas', 'Florida', 'Illinois', 'Pennsylvania', 'Ohio', 'Georgia', 'North Carolina', 'Michigan'],
                'United Kingdom': ['England', 'Scotland', 'Wales', 'Northern Ireland'],
                'Australia': ['New South Wales', 'Victoria', 'Queensland', 'Western Australia', 'South Australia', 'Tasmania', 'Australian Capital Territory', 'Northern Territory'],
                'Germany': ['Bavaria', 'Baden-Württemberg', 'North Rhine-Westphalia', 'Lower Saxony', 'Hesse', 'Saxony', 'Rhineland-Palatinate', 'Schleswig-Holstein'],
                'France': ['Île-de-France', 'Provence-Alpes-Côte d\'Azur', 'Auvergne-Rhône-Alpes', 'Nouvelle-Aquitaine', 'Occitanie', 'Hauts-de-France', 'Grand Est', 'Pays de la Loire']
            };
            
            if (selectedCountry && provincesByCountry[selectedCountry]) {
                provincesByCountry[selectedCountry].forEach(province => {
                    const option = document.createElement('option');
                    option.value = province;
                    option.textContent = province;
                    provinceSelect.appendChild(option);
                });
            }
        }
        
        // Search universities
        function searchUniversities() {
            // Get filter values
            currentFilters.search = document.getElementById('searchInput').value;
            currentFilters.country = document.getElementById('countrySelect').value;
            currentFilters.province = document.getElementById('provinceSelect').value;
            currentFilters.university_type = document.getElementById('universityTypeSelect').value;
            currentFilters.language = document.getElementById('languageSelect').value;
            currentFilters.sort_by = document.getElementById('sortSelect').value;
            
            currentPage = 1;
            loadUniversities(currentPage);
        }
        
        // Load universities
        async function loadUniversities(page = 1) {
            try {
                showLoading();
                
                const perPage = document.getElementById('perPageSelect').value;
                const params = new URLSearchParams({
                    page: page,
                    per_page: perPage,
                    ...currentFilters
                });
                
                // Remove empty parameters
                for (let [key, value] of [...params.entries()]) {
                    if (!value) {
                        params.delete(key);
                    }
                }
                
                const response = await fetch(`${API_BASE}/universities?${params}`);
                const data = await response.json();
                
                allUniversities = data.universities;
                displayUniversities(data.universities);
                displayPagination(data.pagination);
                updateResultsInfo(data.pagination);
                
            } catch (error) {
                console.error('Error loading universities:', error);
                showError('Failed to load universities. Please try again.');
            }
        }
        
        // Display universities in grid view
        function displayUniversities(universities) {
            const container = document.getElementById('universities-grid');
            
            if (universities.length === 0) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="empty-state text-center p-5">
                            <i class="fas fa-university fa-4x text-muted mb-3"></i>
                            <h4>No universities found</h4>
                            <p class="text-muted">Try adjusting your search filters or criteria.</p>
                        </div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            universities.forEach(university => {
                const universityCard = `
                    <div class="col-lg-6 col-xl-4 mb-4">
                        <div class="university-card facultyfinder-card p-4 h-100">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="mb-1">
                                    <a href="/university/${university.university_code}" class="text-decoration-none text-primary fw-bold">
                                        ${university.name}
                                    </a>
                                </h5>
                                ${university.established ? 
                                    `<span class="badge bg-secondary">Est. ${university.established}</span>` : 
                                    ''
                                }
                            </div>
                            
                            <div class="mb-3">
                                <div class="text-muted mb-2">
                                    <i class="fas fa-map-marker-alt me-2"></i>
                                    <strong>${university.city || 'Unknown'}</strong>
                                    ${university.province_state ? `, ${university.province_state}` : ''}
                                    <br>
                                    <i class="fas fa-globe me-2"></i>
                                    <strong>${university.country}</strong>
                                    ${university.address ? `
                                        <a href="https://www.google.com/maps/search/${encodeURIComponent(university.name + ' ' + university.address)}" 
                                           target="_blank" class="text-decoration-none maps-link ms-2"
                                           title="View on Google Maps">
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                    ` : ''}
                                </div>
                                
                                ${university.type ? `
                                <div class="text-muted mb-2">
                                    <i class="fas fa-building me-2"></i>
                                    <strong>${university.type}</strong>
                                </div>
                                ` : ''}
                                
                                ${university.language ? `
                                <div class="text-muted mb-2">
                                    <i class="fas fa-language me-2"></i>
                                    <strong>${university.language}</strong>
                                </div>
                                ` : ''}
                                
                                ${university.website ? `
                                <div class="text-muted mb-2">
                                    <i class="fas fa-link me-2"></i>
                                    <a href="${university.website}" target="_blank" class="text-decoration-none">
                                        <strong>Official Website</strong>
                                        <i class="fas fa-external-link-alt ms-1"></i>
                                    </a>
                                </div>
                                ` : ''}
                            </div>
                            
                            <div class="mt-auto">
                                <div class="row text-center">
                                    <div class="col-6">
                                        <div class="stat-item">
                                            <div class="stat-number text-primary fw-bold">${university.faculty_count || 0}</div>
                                            <div class="stat-label">Faculty</div>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="stat-item">
                                            <div class="stat-number text-success fw-bold">${university.department_count || 0}</div>
                                            <div class="stat-label">Departments</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += universityCard;
            });
            
            // Update table view if active
            if (currentView === 'list') {
                displayUniversitiesTable(universities);
            }
        }
        
        // Display universities in table view
        function displayUniversitiesTable(universities) {
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = '';
            
            universities.forEach(university => {
                const row = `
                    <tr data-university-id="${university.university_code}">
                        <td data-sort-value="${university.name}">
                            <div class="fw-bold">
                                <a href="/university/${university.university_code}" class="text-decoration-none text-primary">
                                    ${university.name}
                                </a>
                            </div>
                        </td>
                        <td data-sort-value="${university.country}">
                            <div class="fw-semibold">${university.country}</div>
                            ${university.province_state ? `<small class="text-muted">${university.province_state}</small>` : ''}
                        </td>
                        <td data-sort-value="${university.city || ''}">
                            <div>${university.city || 'Unknown'}</div>
                            ${university.address ? `
                                <a href="https://www.google.com/maps/search/${encodeURIComponent(university.name + ' ' + university.address)}" 
                                   target="_blank" class="text-decoration-none text-muted" title="View on Google Maps">
                                    <i class="fas fa-map-marker-alt"></i>
                                </a>
                            ` : ''}
                        </td>
                        <td data-sort-value="${university.type || ''}">
                            <span class="badge bg-secondary">${university.type || 'N/A'}</span>
                        </td>
                        <td class="text-center" data-sort-value="${university.faculty_count || 0}">
                            <span class="fw-bold text-primary">${university.faculty_count || 0}</span>
                        </td>
                        <td class="text-center" data-sort-value="${university.department_count || 0}">
                            <span class="fw-bold text-success">${university.department_count || 0}</span>
                        </td>
                        <td class="text-center" data-sort-value="${university.established || 0}">
                            ${university.established ? 
                                `<span class="badge bg-secondary">${university.established}</span>` : 
                                '<span class="text-muted">Unknown</span>'
                            }
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="/university/${university.university_code}" 
                                   class="btn btn-outline-primary btn-sm" title="View Profile">
                                    <i class="fas fa-eye"></i>
                                </a>
                                ${university.website ? `
                                    <a href="${university.website}" target="_blank" 
                                       class="btn btn-outline-secondary btn-sm" title="Official Website">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                ` : ''}
                                <a href="/faculties?university=${encodeURIComponent(university.name)}" 
                                   class="btn btn-outline-success btn-sm" title="View Faculty">
                                    <i class="fas fa-users"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }
        
        // Toggle between grid and list view
        function toggleView(view) {
            currentView = view;
            
            const gridContainer = document.getElementById('universities-grid');
            const tableContainer = document.getElementById('universities-table');
            const viewButtons = document.querySelectorAll('[data-view]');
            
            // Update active button
            viewButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-view') === view) {
                    btn.classList.add('active');
                }
            });
            
            // Toggle views
            if (view === 'grid') {
                gridContainer.style.display = 'flex';
                gridContainer.className = 'row';
                tableContainer.style.display = 'none';
            } else if (view === 'list') {
                gridContainer.style.display = 'none';
                tableContainer.style.display = 'block';
                displayUniversitiesTable(allUniversities);
            }
        }
        
        // Show university details
        function showUniversityDetails(universityCode) {
            window.location.href = `/university/${universityCode}`;
        }
        
        // Reset filters
        function resetFilters() {
            document.getElementById('university-search-form').reset();
            currentFilters = {
                search: '',
                country: '',
                province: '',
                university_type: '',
                language: '',
                sort_by: 'faculty_count'
            };
            currentPage = 1;
            loadUniversities(currentPage);
        }
        
        // Display pagination
        function displayPagination(pagination) {
            const container = document.getElementById('pagination-container');
            
            if (pagination.total_pages <= 1) {
                container.innerHTML = '';
                return;
            }
            
            let paginationHTML = '<nav aria-label="Universities pagination"><ul class="pagination justify-content-center">';
            
            // Previous button
            if (pagination.page > 1) {
                paginationHTML += `
                    <li class="page-item">
                        <a class="page-link" href="#" onclick="changePage(${pagination.page - 1})">Previous</a>
                    </li>
                `;
            }
            
            // Page numbers
            const startPage = Math.max(1, pagination.page - 2);
            const endPage = Math.min(pagination.total_pages, pagination.page + 2);
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <li class="page-item ${i === pagination.page ? 'active' : ''}">
                        <a class="page-link" href="#" onclick="changePage(${i})">${i}</a>
                    </li>
                `;
            }
            
            // Next button
            if (pagination.page < pagination.total_pages) {
                paginationHTML += `
                    <li class="page-item">
                        <a class="page-link" href="#" onclick="changePage(${pagination.page + 1})">Next</a>
                    </li>
                `;
            }
            
            paginationHTML += '</ul></nav>';
            container.innerHTML = paginationHTML;
        }
        
        // Change page
        function changePage(page) {
            currentPage = page;
            loadUniversities(page);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Update results info
        function updateResultsInfo(pagination) {
            const info = document.getElementById('results-info');
            const start = ((pagination.page - 1) * pagination.per_page) + 1;
            const end = Math.min(pagination.page * pagination.per_page, pagination.total_count);
            
            info.innerHTML = `
                Showing ${start}-${end} of ${pagination.total_count} universities
                <span class="text-primary fw-bold">(Page ${pagination.page} of ${pagination.total_pages})</span>
            `;
        }
        
        // Show loading indicator
        function showLoading() {
            const container = document.getElementById('universities-grid');
            container.innerHTML = `
                <div class="col-12 text-center p-5">
                    <div class="loading-spinner"></div>
                    <p class="mt-3 text-muted">Loading universities...</p>
                </div>
            `;
            
            const info = document.getElementById('results-info');
            info.innerHTML = 'Loading universities...';
        }
        
        // Show error message
        function showError(message) {
            const container = document.getElementById('universities-grid');
            container.innerHTML = `
                <div class="col-12">
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        ${message}
                    </div>
                </div>
            `;
            
            const info = document.getElementById('results-info');
            info.innerHTML = 'Error loading data';
        }
    </script>
</body>
</html> 