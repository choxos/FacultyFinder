<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FacultyFinder - Discover Your Ideal Academic Collaborators</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="FacultyFinder helps researchers discover ideal faculty collaborators across universities worldwide using AI-powered matching and comprehensive academic profiles.">
    <meta name="keywords" content="faculty finder, academic collaboration, research, universities, professors, global, worldwide">
    <meta name="author" content="FacultyFinder Team">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@6.0.0/css/all.min.css">
    
    <!-- Custom CSS Theme -->
    <link rel="stylesheet" href="/static/css/themes/facultyfinder-theme.css">
    <link rel="stylesheet" href="/static/css/facultyfinder.css">
    <link rel="stylesheet" href="/static/css/filter-fixes.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="/">
                <i class="fas fa-graduation-cap me-2"></i>
                FacultyFinder
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/countries">Countries</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/universities">Universities</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/faculties">Faculties</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/ai-assistant">
                            <i class="fas fa-robot me-1"></i>AI Assistant
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="btn btn-outline-primary me-2" href="/login">
                            <i class="fas fa-sign-in-alt me-1"></i>Sign In
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary" href="/register">
                            <i class="fas fa-user-plus me-1"></i>Sign Up
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container text-center">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold text-primary mb-4">
                        Discover Your Ideal Academic Collaborators
                    </h1>
                    <p class="lead mb-5">
                        Connect with leading faculty members from top universities worldwide. 
                        Find research mentors, collaboration partners, and academic opportunities 
                        using AI-powered matching and comprehensive faculty profiles.
                    </p>
                    
                    <!-- Quick Search -->
                    <div class="search-container mb-5">
                        <form action="/faculties" method="GET" class="search-form">
                            <div class="input-group input-group-lg">
                                <input type="text" name="search" class="form-control" 
                                       placeholder="Search faculty by name, research area, or keywords...">
                                <button class="btn btn-primary" type="submit">
                                    <i class="fas fa-search me-2"></i>Search Faculty
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Quick Action Buttons -->
                    <div class="quick-actions">
                        <a href="/universities" class="btn btn-outline-primary btn-lg me-3 mb-3">
                            <i class="fas fa-university me-2"></i>Browse Universities
                        </a>
                        <a href="/ai-assistant" class="btn btn-success btn-lg mb-3">
                            <i class="fas fa-robot me-2"></i>AI Assistant
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Statistics -->
    <section class="stats-section py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold text-dark mb-3">Platform Statistics</h2>
                        <p class="text-muted">Connecting researchers worldwide with comprehensive academic data</p>
                    </div>
                    
                    <div class="row g-4">
                        <div class="col-md-3 col-6 mb-4">
                            <div class="stat-card text-center">
                                <div class="stat-number display-4 fw-bold text-primary mb-2" id="stat-professors">0</div>
                                <div class="stat-label text-muted">Faculty Members</div>
                                <div class="stat-description small text-muted">Worldwide</div>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-4">
                            <div class="stat-card text-center">
                                <div class="stat-number display-4 fw-bold text-success mb-2" id="stat-universities">0</div>
                                <div class="stat-label text-muted">Universities</div>
                                <div class="stat-description small text-muted">Global Network</div>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-4">
                            <div class="stat-card text-center">
                                <div class="stat-number display-4 fw-bold text-info mb-2" id="stat-countries">0</div>
                                <div class="stat-label text-muted">Countries</div>
                                <div class="stat-description small text-muted">Represented</div>
                            </div>
                        </div>
                        <div class="col-md-3 col-6 mb-4">
                            <div class="stat-card text-center">
                                <div class="stat-number display-4 fw-bold text-warning mb-2" id="stat-publications">0</div>
                                <div class="stat-label text-muted">Publications</div>
                                <div class="stat-description small text-muted">Tracked</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Stats Row -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="stats-summary text-center p-4 bg-primary rounded-3 text-white">
                                <h4 class="mb-3">ðŸŽ¯ Find Your Perfect Faculty Match</h4>
                                <p class="mb-0 fs-5">
                                    Join thousands of researchers using AI-powered faculty matching to advance their careers
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Universities Section -->
    <div class="container mb-5">
        <div class="row">
            <div class="col-12">
                <div class="section-header text-center mb-5">
                    <h2 class="fw-bold">Top Universities by Faculty Count</h2>
                    <p class="text-muted">Leading institutions with the most faculty members in our database</p>
                </div>
                
                <div class="row" id="top-universities-container">
                    <!-- Loading placeholder -->
                    <div class="col-12 text-center">
                        <div class="loading-spinner"></div>
                        <p class="mt-2 text-muted">Loading top universities...</p>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-12 text-center">
                        <a href="/universities" class="btn btn-primary btn-lg">
                            <i class="fas fa-arrow-right me-2"></i>View All Universities
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <section class="features-section py-5 bg-light">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12">
                    <h2 class="fw-bold mb-3">Why Choose FacultyFinder?</h2>
                    <p class="lead text-muted">Comprehensive platform for academic discovery and collaboration</p>
                </div>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-search fa-3x text-primary"></i>
                        </div>
                        <h4>Advanced Faculty Search</h4>
                        <p class="text-muted">Search faculty by research areas, publications, departments, and academic positions with powerful filtering options.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-robot fa-3x text-success"></i>
                        </div>
                        <h4>AI-Powered Matching</h4>
                        <p class="text-muted">Get intelligent recommendations for potential collaborators based on your research interests and academic goals.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-globe fa-3x text-info"></i>
                        </div>
                        <h4>Global University Coverage</h4>
                        <p class="text-muted">Access comprehensive data from universities and research institutions worldwide with detailed faculty profiles.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-chart-line fa-3x text-warning"></i>
                        </div>
                        <h4>Publication Analytics</h4>
                        <p class="text-muted">Track publication histories, citation metrics, and research impact across different academic fields.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-users-cog fa-3x text-danger"></i>
                        </div>
                        <h4>Collaboration Tools</h4>
                        <p class="text-muted">Connect with potential research partners and build academic networks through our platform.</p>
                    </div>
                </div>
                
                <div class="col-lg-4 col-md-6">
                    <div class="feature-card text-center p-4">
                        <div class="feature-icon mb-3">
                            <i class="fas fa-graduation-cap fa-3x text-secondary"></i>
                        </div>
                        <h4>Career Development</h4>
                        <p class="text-muted">Find mentors, explore academic opportunities, and advance your research career with expert guidance.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent Faculty Section -->
    <section class="py-5">
        <div class="container">
            <div class="row mb-5">
                <div class="col-12 text-center">
                    <h2 class="fw-bold mb-3">Featured Faculty Researchers</h2>
                    <p class="lead text-muted">Discover leading researchers across different academic fields</p>
                </div>
            </div>
            
            <div class="row g-4" id="featured-faculty-container">
                <!-- Featured faculty will be loaded dynamically -->
                <div class="col-12 text-center">
                    <div class="loading-spinner"></div>
                    <p class="mt-2 text-muted">Loading featured faculty...</p>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <a href="/faculties" class="btn btn-success btn-lg">
                        <i class="fas fa-arrow-right me-2"></i>Explore All Faculty
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section py-5 bg-primary text-white">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h2 class="fw-bold mb-4">Ready to Find Your Next Academic Collaborator?</h2>
                    <p class="lead mb-4">Join thousands of researchers using FacultyFinder to advance their academic careers and research goals.</p>
                    <div class="d-flex gap-3 justify-content-center flex-wrap">
                        <a href="/faculties" class="btn btn-light btn-lg">
                            <i class="fas fa-search me-2"></i>Start Faculty Search
                        </a>
                        <a href="/ai-assistant" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-robot me-2"></i>Try AI Assistant
                        </a>
                        <a href="/universities" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-university me-2"></i>Browse Universities
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>
                        <i class="fas fa-graduation-cap me-2"></i>
                        FacultyFinder
                    </h5>
                    <p class="mb-3">
                        Connecting researchers with their ideal academic collaborators worldwide through AI-powered matching and comprehensive faculty profiles.
                    </p>
                    <p class="mb-0">
                        &copy; 2025 FacultyFinder. All rights reserved.
                    </p>
                </div>
                <div class="col-md-3">
                    <h6 class="text-uppercase fw-bold mb-3">Quick Links</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/faculties" class="text-light text-decoration-none">Faculty Search</a></li>
                        <li class="mb-2"><a href="/universities" class="text-light text-decoration-none">Universities</a></li>
                        <li class="mb-2"><a href="/countries" class="text-light text-decoration-none">Countries</a></li>
                        <li class="mb-2"><a href="/ai-assistant" class="text-light text-decoration-none">AI Assistant</a></li>
                        <li class="mb-2"><a href="/api/docs" class="text-light text-decoration-none">API Documentation</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6 class="fw-bold mb-3">Connect With Us</h6>
                    <div class="d-flex gap-3 mb-3">
                        <a href="#" class="text-muted"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-github fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-researchgate fa-lg"></i></a>
                    </div>
                    <p class="small text-muted">
                        Follow us for updates on new features and academic collaboration opportunities.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="/static/js/facultyfinder.js"></script>
    
    <!-- Homepage Statistics and Animation -->
    <script>
        // API Base URL
        const API_BASE = '/api/v1';
        
        // Initialize stats elements with 0
        function initializeStats() {
            const statElements = ['stat-professors', 'stat-universities', 'stat-countries', 'stat-publications'];
            statElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = '0';
                }
            });
        }
        
        // Enhanced number animation function
        function animateNumber(elementId, targetNumber, duration = 2000) {
            const element = document.getElementById(elementId);
            if (!element) {
                console.warn(`Element with ID '${elementId}' not found`);
                return;
            }
            
            // Ensure targetNumber is valid, default to 0 if not
            const target = (!targetNumber || isNaN(targetNumber) || targetNumber < 0) ? 0 : parseInt(targetNumber);
            
            // Start from current number or 0
            const currentText = element.textContent.replace(/,/g, '');
            const startNumber = (!currentText || isNaN(parseInt(currentText))) ? 0 : parseInt(currentText);
            
            // If target is the same as current, no animation needed
            if (startNumber === target) {
                element.textContent = target.toLocaleString();
                return;
            }
            
            const startTime = Date.now();
            
            function updateNumber() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth animation (ease-out cubic)
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                const currentNumber = Math.floor(startNumber + (target - startNumber) * easeProgress);
                
                // Update the element with formatted number
                element.textContent = currentNumber.toLocaleString();
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                } else {
                    // Ensure final number is exactly the target
                    element.textContent = target.toLocaleString();
                }
            }
            
            requestAnimationFrame(updateNumber);
        }
        
        // Load statistics with enhanced error handling
        async function loadStats() {
            try {
                console.log('Loading statistics...');
                
                const response = await fetch(`${API_BASE}/stats`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Stats loaded:', data);
                
                // Animate numbers with fallback values and validation
                setTimeout(() => {
                    animateNumber('stat-professors', data.total_professors || 272);
                    animateNumber('stat-universities', data.total_universities || 101);
                    animateNumber('stat-countries', data.countries_count || 1);
                    animateNumber('stat-publications', data.total_publications || 0);
                }, 200); // Small delay to ensure smooth animation start
                
            } catch (error) {
                console.error('Error loading stats:', error);
                
                // Use fallback values with animation
                console.log('Using fallback statistics...');
                const fallbackStats = {
                    'stat-professors': 272,
                    'stat-universities': 101,
                    'stat-countries': 1,
                    'stat-publications': 0
                };
                
                setTimeout(() => {
                    Object.entries(fallbackStats).forEach(([id, value]) => {
                        animateNumber(id, value, 1500); // Slightly faster for fallback
                    });
                }, 200);
            }
        }
        
        // Load top universities
        async function loadTopUniversities() {
            try {
                const response = await fetch(`${API_BASE}/universities?per_page=6&sort_by=faculty_count`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                const container = document.getElementById('top-universities-container');
                if (!container) return;
                
                container.innerHTML = '';
                
                if (data.universities && data.universities.length > 0) {
                    data.universities.forEach(university => {
                        const universityCard = `
                            <div class="col-lg-6 col-xl-4 mb-4">
                                <div class="university-card facultyfinder-card p-4 h-100">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h5 class="mb-1">
                                            <a href="/university/${university.university_code || university.name}" class="text-decoration-none university-link">
                                                ${university.name || 'Unknown University'}
                                            </a>
                                        </h5>
                                        <span class="badge bg-success">${university.faculty_count || 0} faculty</span>
                                    </div>
                                    <p class="text-muted mb-3">
                                        <i class="fas fa-map-marker-alt me-2"></i>
                                        ${university.city || 'Unknown'}, ${university.country || 'Unknown'}
                                    </p>
                                    <div class="university-actions">
                                        <a href="/faculties?university=${encodeURIComponent(university.name || '')}" class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-users me-1"></i>View Faculty
                                        </a>
                                    </div>
                                </div>
                            </div>
                        `;
                        container.innerHTML += universityCard;
                    });
                } else {
                    container.innerHTML = '<div class="col-12"><p class="text-muted text-center">No universities data available.</p></div>';
                }
                
            } catch (error) {
                console.error('Error loading top universities:', error);
                const container = document.getElementById('top-universities-container');
                if (container) {
                    container.innerHTML = '<div class="col-12"><p class="text-muted text-center">Unable to load universities at this time.</p></div>';
                }
            }
        }
        
        // Load featured faculty
        async function loadFeaturedFaculty() {
            try {
                const response = await fetch(`${API_BASE}/faculties?per_page=6&sort_by=publications`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                const container = document.getElementById('featured-faculty-container');
                if (!container) return;
                
                container.innerHTML = '';
                
                if (data.faculties && data.faculties.length > 0) {
                    data.faculties.forEach(faculty => {
                        const facultyCard = `
                            <div class="col-lg-6 col-xl-4 mb-4">
                                <div class="faculty-card facultyfinder-card p-4 h-100">
                                    <div class="faculty-info mb-3">
                                        <h5 class="mb-1">
                                            <a href="/professor/${faculty.id}" class="text-decoration-none faculty-link">
                                                ${faculty.name || 'Unknown Faculty'}
                                            </a>
                                        </h5>
                                        <p class="text-muted small mb-2">
                                            ${faculty.primary_position || 'Faculty Member'} at ${faculty.university_name || 'Unknown University'}
                                        </p>
                                        ${faculty.department ? `<p class="text-muted small mb-0">${faculty.department}</p>` : ''}
                                    </div>
                                    <div class="faculty-stats mb-3">
                                        <div class="d-flex justify-content-between small">
                                            <span><i class="fas fa-file-alt me-1"></i>${faculty.total_publications || 0} publications</span>
                                            <span><i class="fas fa-clock me-1"></i>${faculty.publications_last_5_years || 0} recent</span>
                                        </div>
                                    </div>
                                    <div class="faculty-actions">
                                        <a href="/professor/${faculty.id}" class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-user me-1"></i>View Profile
                                        </a>
                                    </div>
                                </div>
                            </div>
                        `;
                        container.innerHTML += facultyCard;
                    });
                } else {
                    container.innerHTML = '<div class="col-12"><p class="text-muted text-center">No faculty data available.</p></div>';
                }
                
            } catch (error) {
                console.error('Error loading featured faculty:', error);
                const container = document.getElementById('featured-faculty-container');
                if (container) {
                    container.innerHTML = '<div class="col-12"><p class="text-muted text-center">Unable to load faculty at this time.</p></div>';
                }
            }
        }
        
        // Show error message
        function showError(containerId, message) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = `
                    <div class="col-12">
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            ${message}
                        </div>
                    </div>
                `;
            }
        }
        
        // Enhanced page initialization
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing FacultyFinder homepage...');
            
            // Initialize stats to 0 first
            initializeStats();
            
            // Load data with slight delays for better UX
            setTimeout(() => loadStats(), 100);
            setTimeout(() => loadTopUniversities(), 300);
            setTimeout(() => loadFeaturedFaculty(), 500);
        });
        
        // Add smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html> 